import{n as b,_ as C,d as w,o as P,c as F,a as f,b as o,w as a,F as y,E as r,e as k,f as v,g as E,h as i,i as B,j as I,k as $,l as U}from"./index-0392ae0c.js";import{E as z}from"./el-pagination-d03e465f.js";/* empty css                   */import{c as L}from"./cloneDeep-5753016d.js";const T=e=>b.request({url:"/mall/pms-album/page",method:"post",data:e}),W=e=>b.request({url:"/mall/pms-album/del/"+e.id,params:e}),q=e=>b.request({url:"/mall/pms-album/add",method:"post",data:e}),A=e=>b.request({url:"/mall/pms-album/edit",method:"post",data:e}),D=e=>b.request({url:"/mall/pms-album/one/"+e.id,method:"get",params:e}),N=w({data(){return{pms_albums:[],Pms_album:[],searchText:"",page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,pms_album:{coverPic:"",description:"",id:0,name:"",picCount:0,sort:0},formLabelWidth:80}},mounted(){this.getPms_albumsPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.pms_album=L(e)},getPms_albumsPage(e){T({current:e,size:2}).then(s=>{console.log(s);const p=s.data.page;this.pms_albums=p.records,this.page=p}).catch(s=>{console.log(s)})},currentchange(e){this.getPms_albumsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&(console.log(e),W({id:e}).then(s=>{if(s.success)this.getPms_albumsPage(this.page.current);else return console.log(s.msg),!1}).catch(s=>{}))},toAdd(){this.dialogFormVisible=!0,this.pms_album={coverPic:"",description:"",id:0,name:"",picCount:0,sort:0}},toFind(){},toFind(){this.dialogFormVisibleById=!0},getpms_albumById(e){console.log(e),this.Pms_album=[],D({id:e}).then(s=>{this.dialogFormVisibleById=!1,console.log(s),this.Pms_album.push(s.data.pms_album);const p=this.Pms_album;this.pms_albums=p})},save(){const e=this.pms_album;e.id==0?q(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getPms_albumsPage(this.page.current),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("未填写完整")}):A(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getPms_albumsPage(this.page.current),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("未填写完整")})}}}),j={class:"pms_albums"},M={class:"pms_album-tools"},G={class:"dialog-footer"},H={class:"dialog-footer"};function J(e,l,s,p,K,O){const m=k,d=B,c=v,_=z,n=I,u=$,g=U,h=E;return P(),F(y,null,[f("div",j,[f("div",M,[o(m,{type:"warning",onClick:e.toAdd},{default:a(()=>[i("添加")]),_:1},8,["onClick"]),o(m,{type:"primary",onClick:e.toFind},{default:a(()=>[i("查询")]),_:1},8,["onClick"])]),o(c,{data:e.pms_albums,style:{width:"100%"}},{default:a(()=>[o(d,{fixed:"",prop:"id",width:"150"}),o(d,{prop:"name",label:"商品名称",width:"120"}),o(d,{prop:"cover_pic",label:"封面大图",width:"120"}),o(d,{prop:"pic_count",label:"图片数量",width:"120"}),o(d,{prop:"sort",label:"商品种类",width:"120"}),o(d,{prop:"description",label:"商品描述",width:"120"}),o(d,{fixed:"right",label:"功能管理",width:"120"},{default:a(t=>[o(m,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(t.row)},{default:a(()=>[i("更新")]),_:2},1032,["onClick"]),o(m,{link:"",type:"primary",size:"small",onClick:V=>e.del(t.row.id)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(_,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(h,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.dialogFormVisible=t),title:"商品信息编辑"},{footer:a(()=>[f("span",G,[o(m,{onClick:l[5]||(l[5]=t=>e.dialogFormVisible=!1)},{default:a(()=>[i("Cancel")]),_:1}),o(m,{type:"primary",onClick:e.save},{default:a(()=>[i("保存")]),_:1},8,["onClick"])])]),default:a(()=>[o(g,{model:e.pms_album},{default:a(()=>[o(u,{label:"商品名称","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.pms_album.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.pms_album.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"coverPic","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.pms_album.coverPic,"onUpdate:modelValue":l[1]||(l[1]=t=>e.pms_album.coverPic=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"picCount","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.pms_album.picCount,"onUpdate:modelValue":l[2]||(l[2]=t=>e.pms_album.picCount=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"sort","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.pms_album.sort,"onUpdate:modelValue":l[3]||(l[3]=t=>e.pms_album.sort=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"description","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.pms_album.description,"onUpdate:modelValue":l[4]||(l[4]=t=>e.pms_album.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(h,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":l[10]||(l[10]=t=>e.dialogFormVisibleById=t),title:"查询"},{footer:a(()=>[f("span",H,[o(m,{onClick:l[8]||(l[8]=t=>e.dialogFormVisible=!1)},{default:a(()=>[i("Cancel")]),_:1}),o(m,{type:"primary",onClick:l[9]||(l[9]=t=>e.getpms_albumById(e.searchText))},{default:a(()=>[i("查询 ")]),_:1})])]),default:a(()=>[o(g,{model:e.pms_album},{default:a(()=>[o(u,{label:"请输入商品id","label-width":e.formLabelWidth},{default:a(()=>[o(n,{modelValue:e.searchText,"onUpdate:modelValue":l[7]||(l[7]=t=>e.searchText=t),placeholder:"请输入商品id",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=C(N,[["render",J]]);export{Y as default};
