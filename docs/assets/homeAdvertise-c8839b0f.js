import{n as g,_ as G,r,o as O,c as R,b as e,w as o,a as k,f as H,g as J,h as i,t as T,j as K,e as L,i as Q,ay as W,k as X,l as Z}from"./index-0392ae0c.js";import{E as ee}from"./el-switch-1b4fc199.js";import{E as le,a as ae}from"./el-row-ba6ded54.js";import{E as te}from"./el-pagination-d03e465f.js";import{E as oe}from"./el-image-viewer-2c25c0e6.js";import"./index-847fc89d.js";const b={getData:s=>g.post("/mall/sms-home-advertise/page",s),addAdv:s=>g.post("/mall/sms-home-advertise/add",s),delAdv:s=>g.request({url:"/mall/sms-home-advertise/del/"+s.id,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),editAdv:s=>g.post("/mall/sms-home-advertise/edit",s)};const ne={class:"home-adv"},ue={class:"pagination"},se={class:"dialog-footer"},de={__name:"homeAdvertise",setup(s){const _=r(1),m=r(!1),V=r(""),f=r([]),C=r(0),y=r(1),w=r(10),t=r({}),p=async()=>{let{data:u}=await b.getData({current:y.value,size:w.value});f.value=u.page.records,C.value=u.page.total};p();const U=()=>{f.value=f.value.filter(u=>u.name.includes(V.value))},h=()=>{m.value=!0,_.value=1},z=async(u,a)=>{await b.delAdv({id:a.id}),p()},D=(u,a)=>{m.value=!0,_.value=0,a.status=a.status==1,t.value={...a}},A=async()=>{if(!_.value){t.value.status=t.value.status?1:0,await b.editAdv(t.value),p(),m.value=!1;return}t.value.status=t.value.status?1:0,await b.addAdv(t.value),p(),m.value=!1},Y=()=>{t.value={}},S=u=>{p()},$=u=>{p()};return(u,a)=>{const v=K,c=L,E=le,n=Q,B=oe,F=W,I=H,M=te,d=X,x=ae,N=ee,P=Z,j=J;return O(),R("div",ne,[e(E,{style:{"margin-bottom":"10px"}},{default:o(()=>[e(v,{style:{width:"150px","margin-right":"10px"},modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=l=>V.value=l),autocomplete:"off"},null,8,["modelValue"]),e(c,{type:"primary",onClick:U},{default:o(()=>[i("查询")]),_:1})]),_:1}),e(E,{style:{"margin-bottom":"5px"}},{default:o(()=>[e(c,{type:"primary",onClick:h},{default:o(()=>[i("新增广告")]),_:1})]),_:1}),e(I,{border:"",data:f.value,style:{width:"100%"}},{default:o(()=>[e(n,{align:"center",prop:"id",label:"编号",width:"80"}),e(n,{align:"center",prop:"name",label:"广告名称"}),e(n,{align:"center",label:"封面图"},{default:o(l=>[e(B,{src:l.row.pic},null,8,["src"])]),_:1}),e(n,{align:"center",prop:"startTime",label:"开始时间"}),e(n,{align:"center",prop:"endTime",label:"结束时间"}),e(n,{align:"center",prop:"clickCount",label:"点击数"}),e(n,{align:"center",prop:"orderCount",label:"下单数"}),e(n,{align:"center",prop:"note",label:"备注"}),e(n,{align:"center",prop:"sort",label:"排序"}),e(n,{align:"center",prop:"url",label:"链接地址"}),e(n,{align:"center",label:"状态"},{default:o(l=>[e(F,null,{default:o(()=>[i(T(l.row.status==1?"已上线":"已下线"),1)]),_:2},1024)]),_:1}),e(n,{align:"center",prop:"type",label:"轮播位置"},{default:o(l=>[i(T(l.row.type==1?"首页轮播":"app轮播"),1)]),_:1}),e(n,{align:"center",label:"操作"},{default:o(l=>[e(c,{type:"primary",size:"small",onClick:q=>D(l.$index,l.row)},{default:o(()=>[i("编辑")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"danger",onClick:q=>z(l.$index,l.row)},{default:o(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",ue,[e(M,{style:{"margin-top":"10px"},"current-page":y.value,"onUpdate:currentPage":a[1]||(a[1]=l=>y.value=l),"page-size":w.value,"onUpdate:pageSize":a[2]||(a[2]=l=>w.value=l),"page-sizes":[10,20,50,100],small:"small",background:"",layout:"total, sizes, prev, pager, next, jumper",total:C.value,onSizeChange:S,onCurrentChange:$},null,8,["current-page","page-size","total"])]),e(j,{modelValue:m.value,"onUpdate:modelValue":a[12]||(a[12]=l=>m.value=l),title:_.value==0?"编辑":"新增",onClosed:Y},{footer:o(()=>[k("span",se,[e(c,{onClick:a[11]||(a[11]=l=>m.value=!1)},{default:o(()=>[i("取消")]),_:1}),e(c,{type:"primary",onClick:A},{default:o(()=>[i(" 保存 ")]),_:1})])]),default:o(()=>[e(P,{"label-width":"180px",model:t.value},{default:o(()=>[e(d,{label:"广告名称"},{default:o(()=>[e(v,{modelValue:t.value.name,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"封面图地址"},{default:o(()=>[e(v,{modelValue:t.value.pic,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.pic=l),type:"file",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"备注"},{default:o(()=>[e(v,{modelValue:t.value.note,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.note=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"排序"},{default:o(()=>[e(v,{modelValue:t.value.sort,"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.sort=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"链接地址"},{default:o(()=>[e(v,{modelValue:t.value.url,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.url=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(d,{label:"开始日期"},{default:o(()=>[e(x,{modelValue:t.value.startTime,"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.startTime=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"结束日期"},{default:o(()=>[e(x,{modelValue:t.value.endTime,"onUpdate:modelValue":a[9]||(a[9]=l=>t.value.endTime=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"上下线状态"},{default:o(()=>[e(N,{modelValue:t.value.status,"onUpdate:modelValue":a[10]||(a[10]=l=>t.value.status=l),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},_e=G(de,[["__scopeId","data-v-02a2104d"]]);export{_e as default};
