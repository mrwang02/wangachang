import{n as c,_ as w,d as C,o as y,c as _,a as u,b as t,w as a,F as E,E as s,e as k,f as F,g as v,h as p,i as P,j as z,k as B,l as $}from"./index-0392ae0c.js";import{E as L}from"./el-pagination-d03e465f.js";import{E as U}from"./el-message-box-563d19ae.js";import{c as W}from"./cloneDeep-5753016d.js";const S=e=>c.request({url:"/mall/cms-help-category/page",method:"post",data:e}),T=e=>c.request({url:"/mall/cms-help-category/add",method:"post",data:e}),q=e=>c.request({url:"/mall/cms-help-category/del/"+e.id,method:"get"}),A=e=>c.request({url:"/mall/cms-help-category/edit",method:"post",data:e}),D=C({data(){return{cmHelps:[],page:{total:0,current:1,size:5},dialogFormVisible:!1,cmHelp:{helpCount:0,icon:"",id:0,name:"",showStatus:0,sort:0},formLabelWidth:80}},mounted(){this.getCmHelpsPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.cmHelp=W(e)},getCmHelpsPage(e){S({current:e,size:5}).then(i=>{console.log(i);const g=i.data.page;this.cmHelps=g.records,this.page=g}).catch(i=>{console.log(i)})},currentchange(e){this.getCmHelpsPage(e),this.page.current=e},del(e){console.log(e),U.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{q({id:e.id}).then(l=>{l.code===1?(s({type:"success",message:"删除成功"}),this.getCmHelpsPage(this.page.current)):s({type:"error",message:"删除失败"})})}).catch(()=>{s({type:"info",message:"取消删除"})})},toAdd(){this.cmHelp={helpCount:0,icon:"",id:0,name:"",showStatus:0,sort:0},this.dialogFormVisible=!0},save(){const e=this.cmHelp;e.id==0?T(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getCmHelpsPage(this.page.current),s(l.msg);else return s(l.msg),!1}).catch(l=>{s("网络错误联系管理员"),console.log(l)}):A(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getCmHelpsPage(this.page.current),s(l.msg);else return s(l.msg),!1}).catch(l=>{s("网络错误联系管理员")})}}}),N=u("div",{class:""},"帮助页面",-1),I=u("br",null,null,-1),M={class:"cmHelps"},j={class:"adcate-tools"},G={class:"dialog-footer"};function J(e,l,i,g,K,O){const d=k,n=P,h=F,f=L,m=z,r=B,b=$,H=v;return y(),_(E,null,[N,I,u("div",M,[u("div",j,[t(d,{type:"warning",onClick:e.toAdd},{default:a(()=>[p("添加")]),_:1},8,["onClick"])]),t(h,{data:e.cmHelps,style:{width:"100%"}},{default:a(()=>[t(n,{fixed:"",prop:"id",label:"id",width:"50"}),t(n,{prop:"name",label:"帮助名称"}),t(n,{prop:"helpCount",label:"帮助数量",width:"120"}),t(n,{prop:"icon",label:"图标",width:"120"}),t(n,{prop:"showStatus",label:"显示状态",width:"120"}),t(n,{prop:"sort",label:"排序",width:"120"}),t(n,{fixed:"right",label:"操作",width:"120"},{default:a(o=>[t(d,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(o.row)},{default:a(()=>[p("更新")]),_:2},1032,["onClick"]),t(d,{link:"",type:"primary",size:"small",onClick:V=>e.del(o.row)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(H,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=o=>e.dialogFormVisible=o),title:"编辑"},{footer:a(()=>[u("span",G,[t(d,{onClick:l[5]||(l[5]=o=>e.dialogFormVisible=!1)},{default:a(()=>[p("取消")]),_:1}),t(d,{type:"primary",onClick:e.save},{default:a(()=>[p(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[t(b,{model:e.cmHelp},{default:a(()=>[t(r,{label:"帮助名称","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.cmHelp.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.cmHelp.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"帮助数量","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.cmHelp.helpCount,"onUpdate:modelValue":l[1]||(l[1]=o=>e.cmHelp.helpCount=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"图标","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.cmHelp.icon,"onUpdate:modelValue":l[2]||(l[2]=o=>e.cmHelp.icon=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"显示状态","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.cmHelp.showStatus,"onUpdate:modelValue":l[3]||(l[3]=o=>e.cmHelp.showStatus=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"排序","label-width":e.formLabelWidth},{default:a(()=>[t(m,{modelValue:e.cmHelp.sort,"onUpdate:modelValue":l[4]||(l[4]=o=>e.cmHelp.sort=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Z=w(D,[["render",J]]);export{Z as default};
