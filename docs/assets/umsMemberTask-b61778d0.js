import{n as p,_ as w,d as V,o as g,c,a as n,b as a,w as s,q as C,s as E,E as i,e as k,f as z,g as S,h as r,t as P,i as T,j as $,k as q,l as v}from"./index-0392ae0c.js";import{E as M}from"./el-pagination-d03e465f.js";/* empty css                   */import{E as _}from"./el-message-box-563d19ae.js";const B=e=>p.request({url:"mall/ums-member-task/page",method:"post",data:e}),U=e=>p.request({url:"mall/ums-member-task/add",method:"POST",data:e}),F=e=>p.request({url:"/mall/ums-member-task/del/"+e.id,method:"GET"}),N=e=>p.request({url:"mall/ums-member-task/edit",method:"POST",data:e});const j=V({data(){return{requestData:{current:1,size:10},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userStatus:!1}},methods:{changStatus(e){this.userStatus=e,this.itemData.status=this.userStatus?1:0},findPage(){B(this.requestData).then(e=>{this.resuleData=e.data.page})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,U(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,i({message:"新增成功",type:"success"}),this.findPage()):i({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showEdit(e){this.isEdit=!0,this.userStatus=e.status!=0,this.itemData={id:e.id,growth:e.growth,intergration:e.intergration,name:e.name,type:e.type},console.log(this.itemData),this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)N(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,i({message:"修改成功",type:"success"}),this.findPage()):i({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),_.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{F({id:e.id}).then(t=>{t.code===1?(i({type:"success",message:"删除成功"}),this.findPage()):i({type:"error",message:"删除失败"})})}).catch(()=>{i({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),I=n("div",{class:""},[n("h1",{style:{"text-align":"center"}},"会员任务表")],-1),O={class:"dialog-footer"};function A(e,t,G,H,J,K){const u=k,o=T,f=z,h=M,d=$,m=q,b=v,D=S;return g(),c("div",null,[I,n("div",null,[a(u,{type:"success",onClick:t[0]||(t[0]=l=>e.showDialog())},{default:s(()=>[r("ADD")]),_:1})]),n("div",null,[a(f,{data:e.resuleData.records,stripe:"",style:{width:"100%"},"row-style":{height:"60px"}},{default:s(()=>[a(o,{prop:"id",label:"编号",width:"250",align:"center"},{default:s(l=>[r(P((e.resuleData.current-1)*e.resuleData.size+l.$index+1),1)]),_:1}),a(o,{prop:"growth",label:"赠送成长值(exp)",width:"250",align:"center"}),a(o,{prop:"intergration",label:"赠送积分(分)",width:"250",align:"center"}),a(o,{prop:"name",label:"名称",width:"250",align:"center"}),a(o,{prop:"type",label:"任务类型",align:"center"}),a(o,{label:"功能管理",fixed:"right"},{default:s(l=>[a(u,{size:"small",onClick:y=>e.showEdit(l.row)},{default:s(()=>[r("编辑")]),_:2},1032,["onClick"]),a(u,{size:"small",type:"danger",onClick:y=>e.del(l.row)},{default:s(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),n("div",null,[a(h,{"current-page":e.resuleData.current,"onUpdate:currentPage":t[1]||(t[1]=l=>e.resuleData.current=l),"page-size":e.resuleData.size,"onUpdate:pageSize":t[2]||(t[2]=l=>e.resuleData.size=l),"page-sizes":[10,20,30,40],layout:"total, prev, pager, next, jumper, sizes",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),e.dialogVisible?(g(),C(D,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[9]||(t[9]=l=>e.dialogVisible=l),title:e.isEdit?"修改数据":"新增数据",width:"600px"},{footer:s(()=>[n("span",O,[a(u,{type:"Plus",onClick:t[7]||(t[7]=l=>e.confire())},{default:s(()=>[r("取消")]),_:1}),a(u,{type:"success",onClick:t[8]||(t[8]=l=>e.isEdit?e.editConfirm():e.confirm())},{default:s(()=>[r("确认")]),_:1})])]),default:s(()=>[a(b,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:s(()=>[a(m,{label:"成长值","label-width":100,prop:"growth"},{default:s(()=>[a(d,{modelValue:e.itemData.growth,"onUpdate:modelValue":t[3]||(t[3]=l=>e.itemData.growth=l),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"积分","label-width":100,prop:"intergration"},{default:s(()=>[a(d,{modelValue:e.itemData.intergration,"onUpdate:modelValue":t[4]||(t[4]=l=>e.itemData.intergration=l),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"名称","label-width":100,prop:"name"},{default:s(()=>[a(d,{modelValue:e.itemData.name,"onUpdate:modelValue":t[5]||(t[5]=l=>e.itemData.name=l),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"任务类型","label-width":100,prop:"type"},{default:s(()=>[a(d,{modelValue:e.itemData.type,"onUpdate:modelValue":t[6]||(t[6]=l=>e.itemData.type=l),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):E("",!0)])}const X=w(j,[["render",A]]);export{X as default};
