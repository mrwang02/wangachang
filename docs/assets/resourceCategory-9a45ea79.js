import{n as u,_ as y,d as C,o as p,c as E,a as d,b as s,w as l,q as V,s as w,E as i,e as z,f as T,g as k,h as o,t as P,i as $,j as q,k as v,l as S}from"./index-0392ae0c.js";import{E as B}from"./el-pagination-d03e465f.js";import{E as _}from"./el-message-box-563d19ae.js";/* empty css                   */const F=e=>u.request({url:"/mall/ums-resource-category/page",method:"POST",data:e}),U=e=>u.request({url:"/mall/ums-resource-category/add",method:"POST",data:e}),N=e=>u.request({url:"/mall/ums-resource-category/del/"+e.id,method:"GET"}),O=e=>u.request({url:"/mall/ums-resource-category/edit",method:"POST",data:e}),j=C({data(){return{requestData:{current:1,size:5},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序大小",trigger:"blur"}]}}},methods:{findPage(){F(this.requestData).then(e=>{this.resuleData=e.data.page})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,U(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,i({message:"新增成功",type:"success"}),this.findPage()):i({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showEdit(e){this.isEdit=!0,this.itemData={id:e.id,name:e.name,creatTime:e.createTime,sort:e.sort},this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)O(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,i({message:"修改成功",type:"success"}),this.findPage()):i({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),_.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{N({id:e.id}).then(t=>{t.code===1?(i({type:"success",message:"删除成功"}),this.findPage()):i({type:"error",message:"删除失败"})})}).catch(()=>{i({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),I={class:"dialog-footer"};function M(e,t,G,L,A,H){const r=z,n=$,f=T,h=B,m=q,g=v,c=S,D=k;return p(),E("div",null,[d("div",null,[s(r,{type:"primary",onClick:t[0]||(t[0]=a=>e.showDialog())},{default:l(()=>[o("新增")]),_:1})]),d("div",null,[s(f,{data:e.resuleData.records,style:{width:"100%"}},{default:l(()=>[s(n,{label:"编号",width:"180"},{default:l(a=>[o(P((e.resuleData.current-1)*e.resuleData.size+a.$index+1),1)]),_:1}),s(n,{prop:"name",label:"分类名称",width:"180"}),s(n,{prop:"createTime",label:"创建时间"}),s(n,{prop:"sort",label:"排序"}),s(n,{label:"操作"},{default:l(a=>[s(r,{size:"small",onClick:b=>e.showEdit(a.row)},{default:l(()=>[o("编辑")]),_:2},1032,["onClick"]),s(r,{size:"small",type:"danger",onClick:b=>e.del(a.row)},{default:l(()=>[o("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),d("div",null,[s(h,{"current-page":e.resuleData.current,"onUpdate:currentPage":t[1]||(t[1]=a=>e.resuleData.current=a),"page-size":e.resuleData.size,"onUpdate:pageSize":t[2]||(t[2]=a=>e.resuleData.size=a),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),e.dialogVisible?(p(),V(D,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=a=>e.dialogVisible=a),title:e.isEdit?"修改数据":"新增数据",width:"400px"},{footer:l(()=>[d("span",I,[s(r,{type:"primary",onClick:t[5]||(t[5]=a=>e.confire())},{default:l(()=>[o("取消")]),_:1}),s(r,{type:"primary",onClick:t[6]||(t[6]=a=>e.isEdit?e.editConfirm():e.confirm())},{default:l(()=>[o("确认")]),_:1})])]),default:l(()=>[s(c,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:l(()=>[s(g,{label:"分类名称","label-width":"100",prop:"name"},{default:l(()=>[s(m,{modelValue:e.itemData.name,"onUpdate:modelValue":t[3]||(t[3]=a=>e.itemData.name=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),s(g,{label:"排序","label-width":"100",prop:"sort"},{default:l(()=>[s(m,{modelValue:e.itemData.sort,"onUpdate:modelValue":t[4]||(t[4]=a=>e.itemData.sort=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):w("",!0)])}const W=y(j,[["render",M]]);export{W as default};
